# Link Checker Service

HTTP-сервис на Go для проверки доступности интернет-ресурсов и генерации PDF-отчётов.

Сервис принимает список ссылок, проверяет их доступность (`available` / `not available`) и возвращает пользователю результат вместе с уникальным ID группы ссылок.  
Пользователь может запросить PDF-отчёт по нескольким ранее выданным наборам.

---

## Возможности сервиса

### `POST /links/check`
- Принимает список ссылок
- Проверяет их доступность
- Возвращает:
    - статусы для каждой ссылки,
    - уникальный ID, присвоенный набору

### `POST /links/report`
- Принимает список ID
- Возвращает PDF-файл с таблицей всех ссылок из указанных наборов

### Дополнительно:
- Переживает перезапуск сервера (данные хранятся в `data.json`)
- Имеет тесты сервисного и HTTP-слоя

---

## Архитектура

Проект разделён на слои:
- checker/ – проверка доступности URL
- repository/ – файловое хранилище (links.json)
- service/ – бизнес-логика
- report/ – генерация PDF
- handlers/ – HTTP-обработчики (chi)

## Установка и запуск
Клонировать:
```bash
git clone https://github.com/PavelKhromykhGo/01.12.2025
cd 01.12.2025
```
Установить зависимости:
```bash
go mod tidy
```
Запуск сервера:
```bash
go run ./cmd
```
Сервер поднимется на:
```bash
http://localhost:8080
```

# API
Проверка через `Postman`
## POST /links/check
### Request:
```bash
{
"links": ["ya.ru", "fake"]
}
```

### Response:
```bash
{
  "links": {
    "ya.ru": "available",
    "fake": "not available"
  },
  "links_num": 1
}
```

## POST /links/report
### Request:
```bash
{
  "links_list": [1]
}
```

### Response:
```bash
Content-Type: application/pdf
```

# Хранение данных

Состояние сервиса сохраняется в файл:
```bash
links.json
```
Он автоматически создаётся в корне проекта при первом POST запросе.
При рестарте сервера данные загружаются из файла.

# Тестирование

В проекте есть unit-тесты для сервисного слоя и для HTTP-handler

### Запуск тестов без кеша:
```bash
go test ./... -count=1
```

# Использованные технологии

Go 1.24+

- chi (легковесный HTTP-router)
- gofpdf (генерация PDF)
- без внешних баз данных и контейнеров